{{note}}: The first byte send by server is 0x00 to say no encrypted or 0x01 to say encrypted by Ssl

= General =
== Client &rarr; Server with reply ==
{| class="wikitable" style="text-align: center; font-size: 85%; width: auto; table-layout: fixed;"
|-
! Main code type
! Sub code type
! Query number
! Packet size
! Data
|-
| style="background: #90ff90; color: black;" | 03
| 
| XX
| {{No}}
| [[Base_protocol_messages#03|Protocol initialization]] '''''(Fast, 1)'''''
|-
| style="background: #90ff90; color: black;" | 04
| 
| XX
| {{No}}
| [[Base_protocol_messages#04|Get first data and send the login]] '''''(Fast, 1)'''''
|-
| style="background: #90ff90; color: black;" | 05
| 
| XX
| {{No}}
| [[Base_protocol_messages#05|Create account]] '''''(Fast, 1)'''''
|-
| style="background: #90ff90; color: black;" | 02
| style="background: #ffcc00; color: black;" | 0003
| XX
| {{Yes}}
| [[Base_protocol_messages#020003|Add character]]
|-
| style="background: #90ff90; color: black;" | 02
| style="background: #ffcc00; color: black;" | 0004
| XX
| {{No}}
| [[Base_protocol_messages#020004|Remove character]]
|-
| style="background: #90ff90; color: black;" | 02
| style="background: #ffcc00; color: black;" | 0005
| XX
| {{No}}
| [[Base_protocol_messages#020005|Select character]]
|-
| style="background: #90ff90; color: black;" | 02
| style="background: #ffcc00; color: black;" | 000C
| XX
| {{Yes}}
| [[Base_protocol_messages#02000C|Send datapack file list]]
|-
| style="background: #90ff90; color: black;" | 02
| style="background: #ffcc00; color: black;" | 000D
| XX
| {{Yes}}
| [[Base_protocol_messages#02000D|Clan action]]
|}
{{Note}}All the main code in this column is considered query with needed reply.
* 1) Fast to have good performance, to face to bruteforce, DDOS, ...

== Client &rarr; Server without reply ==
{| class="wikitable" style="text-align: center; font-size: 85%; width: auto; table-layout: fixed;"
|-
! Main code type
! Sub code type
! Query number
! Packet size
! Data
|-
| style="background: #90ff90; color: black;" | 40
| 
| 
| {{No}}
| [[Base_protocol_messages#40|Send position + direction]] '''''(Fast)'''''
|-
| style="background: #90ff90; color: black;" | 41
| 
| XX
| style="background: #9CF6FF; color: black;" | Depands
| [[Base_protocol_messages#41|Reply to server query]] ([[Base_protocol_messages#Reply|See reply]])
|-
| style="background: #90ff90; color: black;" | 43
| 
| 
| {{Yes}}
| [[Base_protocol_messages#43|Chat]]
|-
| style="background: #90ff90; color: black;" | 42
| style="background: #ffcc00; color: black;" | 0004
| 
| {{No}}
| [[Base_protocol_messages#420004|Clan invite accept]]
|}

== Server &rarr; Client with reply ==
{| class="wikitable" style="text-align: center; font-size: 85%; width: auto; table-layout: fixed;"
|-
! Main code type
! Sub code type
! Query number
! Packet size
! Data
|-
| style="background: #90ff90; color: black;" | 79
| style="background: #ffcc00; color: black;" | 0001
| XX
| {{Yes}}
| [[Base_protocol_messages#790001|Teleport the player]]
|-
| style="background: #90ff90; color: black;" | 79
| style="background: #ffcc00; color: black;" | 0002
| XX
| {{No}}
| [[Base_protocol_messages#790002|Event change]]
|}

== Server &rarr; Client without reply ==
{| class="wikitable" style="text-align: center; font-size: 85%; width: auto; table-layout: fixed;"
|-
! Main code type
! Sub code type
! Query number
! Packet size
! Data
|-
| style="background: #90ff90; color: black;" | C0
| 
| 
| {{Yes}}
| [[Base_protocol_messages#C0|Insert player on map]] '''''(Fast)'''''
|-
| style="background: #90ff90; color: black;" | C1
| 
| XX
| style="background: #9CF6FF; color: black;" | Depands
| [[Base_protocol_messages#C1|Reply to client query]] ([[Base_protocol_messages#Reply|See reply]])
|-
| style="background: #90ff90; color: black;" | C2
| style="background: #ffcc00; color: black;" | 0003
| 
| {{Yes}}
| [[Base_protocol_messages#C20003|update file (raw)]]
|-
| style="background: #90ff90; color: black;" | C2
| style="background: #ffcc00; color: black;" | 0004
| 
| {{Yes}}
| [[Base_protocol_messages#C20003|update file (compressed)]]
|-
| style="background: #90ff90; color: black;" | CA
| 
| 
| {{Yes}}
| [[Base_protocol_messages#CA|Chat]]
|-
| style="background: #90ff90; color: black;" | C2
| style="background: #ffcc00; color: black;" | 0008
| 
| {{Yes}}
| [[Base_protocol_messages#C20008|kicked/ban and reason]]
|-
| style="background: #90ff90; color: black;" | C2
| style="background: #ffcc00; color: black;" | 0009
| 
| {{No}}
| [[Base_protocol_messages#C20009|Clan disolved]]
|-
| style="background: #90ff90; color: black;" | C2
| style="background: #ffcc00; color: black;" | 000A
| 
| {{Yes}}
| [[Base_protocol_messages#C2000A|Clan info]]
|-
| style="background: #90ff90; color: black;" | C2
| style="background: #ffcc00; color: black;" | 000B
| 
| {{Yes}}
| [[Base_protocol_messages#C2000B|Clan invite ask]]
|-
| style="background: #90ff90; color: black;" | C2
| style="background: #ffcc00; color: black;" | 000C
| 
| {{Yes}}
| [[Base_protocol_messages#C2000C|Send datapack send size]]
|-
| style="background: #90ff90; color: black;" | C2
| style="background: #ffcc00; color: black;" | 000D
| 
| {{Yes}}
| [[Base_protocol_messages#C2000D|update file (http)]]
|-
| style="background: #90ff90; color: black;" | C3
| 
| 
| {{No}}
| [[Base_protocol_messages#C3|Player number]]
|-
| style="background: #90ff90; color: black;" | C4
| 
| 
| {{No}}
| [[Base_protocol_messages#C4|Remove all other player on the map]]
|-
| style="background: #90ff90; color: black;" | C5
| 
| 
| {{Yes}}
| [[Base_protocol_messages#C5|Reinser player on same map]] '''''(Fast)'''''
|-
| style="background: #90ff90; color: black;" | C6
| 
| 
| {{Yes}}
| [[Base_protocol_messages#C6|Reinser player on other map]] '''''(Fast)'''''
|-
| style="background: #90ff90; color: black;" | C7
| 
| 
| {{Yes}}
| [[Base_protocol_messages#C7|Move player on map]] '''''(Fast)'''''
|-
| style="background: #90ff90; color: black;" | C8
| 
| 
| {{Yes}}
| [[Base_protocol_messages#C8|Remove player from map]] '''''(Fast)'''''
|-
| style="background: #90ff90; color: black;" | C9
| 
| 
| {{No}}
| [[Base_protocol_messages#C9|Remove all other player on the border map]]
|}

= Reply =
== Client &rarr; Server ==
{| class="wikitable" style="text-align: center; font-size: 85%; width: auto; table-layout: fixed;"
|-
! Main code type of the query
! Sub code type of the query
! Packet size for the reply
! Query
|-
| style="background: #90ff90; color: black;" | 79
| style="background: #ffcc00; color: black;" | 0001
| {{No}}
| [[Base_protocol_messages#Reply_790001|Teleport the player]]
|}
== Server &rarr; Client ==
{| class="wikitable" style="text-align: center; font-size: 85%; width: auto; table-layout: fixed;"
|-
! Main code type of the query
! Sub code type of the query
! Packet size for the reply
! Query
|-
| style="background: #90ff90; color: black;" | 03
|
| {{Yes}}
| [[Base_protocol_messages#Reply_03|Protocol initialization]]
|-
| style="background: #90ff90; color: black;" | 02
| style="background: #ffcc00; color: black;" | 0002
| {{Yes}}
| [[Base_protocol_messages#Reply_020002|Get first data and send the login]]
|-
| style="background: #90ff90; color: black;" | 02
| style="background: #ffcc00; color: black;" | 000C
| {{Yes}}
| [[Base_protocol_messages#Reply_02000C|Send datapack file list]]
|-
| style="background: #90ff90; color: black;" | 02
| style="background: #ffcc00; color: black;" | 000D
| {{No}}
| [[Base_protocol_messages#Reply_02000D|Clan action]]
|}

= Details =
== Client &rarr; Server with reply ==
=== 03 ===
{{Note}}This first packet is send as raw + big (see [[General_protocol#Messages_composition|Messages composition]])

At the connection, send the protocol supported, <span style="font-weight: bold">before all!</span><br />
protocol magic number: <span style="font-style: italic"><span style="color: #40BF00">9cd6498d</span></span>, version: <span style="font-style: italic"><span style="color: #FFBF00">01</span></span>

Final result:
 <span style="color: #40BF00">9cd6498d</span><span style="color: #FFBF00">01</span>

{{Note}}After this, all communication is into the packet size mode send by the protocol.

[[Base_protocol_messages#Reply_03|See reply to this query]]

=== 04 ===
[[File:loginpass-catchchallenger-meca.png]]

Send:
* sha224(sha224(login+/*salt*/"RtR3bm9Z1DFMfAC3"))
* sha224(sha224(pass+/*salt*/"AwjDvPIzfJPTTgHs") + token sended at protocol get)
Then:
  <span style="color: #40BF00">55ac1e86f45ed93220b9d17a97f13b44a3b3978faf8159a632cfa37a</span>, <span style="color: #FF0040">55ac1e86f45ed93220b9d17a97f13b44a3b3978faf8159a632cfa37a</span><br />

[[Base_protocol_messages#Reply_04|See reply to this query]]

=== 05 ===
Send:
* sha224(login+/*salt*/"RtR3bm9Z1DFMfAC3")
* sha224(pass+/*salt*/"AwjDvPIzfJPTTgHs")
Then:
  <span style="color: #40BF00">55ac1e86f45ed93220b9d17a97f13b44a3b3978faf8159a632cfa37a</span>, <span style="color: #FF0040">55ac1e86f45ed93220b9d17a97f13b44a3b3978faf8159a632cfa37a</span><br />

[[Base_protocol_messages#Reply_05|See reply to this query]]

=== 020003 ===
Send the profile id: <span style="color: #FF0040">01</span>, pseudo <span style="color: #40BF00">"toto"</span>, skinId <span style="color: #40BF00">01</span>

[[Base_protocol_messages#Reply_020003|See reply to this query]]

=== 020004 ===
Remove character id: <span style="color: #FF0040">00000001</span>

[[Base_protocol_messages#Reply_020004|See reply to this query]]

=== 020005 ===
Send the character id: <span style="color: #FF0040">00000001</span>

[[Base_protocol_messages#Reply_020005|See reply to this query]]

=== 02000C ===
Blocked is mirror is enabled, is considered as hacking.

Send file name and first 4Byte of sha224 hash:
* <span style="color: #40BF00">&quot;img/player/skin-01.png&quot;</span>, <span style="color: #FF4000">XXXXXXXX</span>
* <span style="color: #40BF00">&quot;img/player/skin-01.png&quot;</span>, <span style="color: #FF4000">XXXXXXXX</span>
* <span style="color: #40BF00">&quot;img/player/skin-01.png&quot;</span>, <span style="color: #FF4000">XXXXXXXX</span>
 <span style="color: #FF4000">00000003</span>
 <span style="color: #FFBF00">0000002c</span><span style="color: #40BF00">0069006d0067002f0070006c0061007900650072002f0073006b0069006e002d00300031002e0070006e0067</span><span style="color: #FF4000">XXXXXXXX</span>
 <span style="color: #FFBF00">0000002c</span><span style="color: #40BF00">0069006d0067002f0070006c0061007900650072002f0073006b0069006e002d00300031002e0070006e0067</span><span style="color: #FF4000">XXXXXXXX</span>
 <span style="color: #FFBF00">0000002c</span><span style="color: #40BF00">0069006d0067002f0070006c0061007900650072002f0073006b0069006e002d00300031002e0070006e0067</span><span style="color: #FF4000">XXXXXXXX</span>
This packet is compressed.

[[Base_protocol_messages#Reply_02000C|See reply to this query]]

=== 02000D ===
Client -&gt; Server:
* Clan action type: <span style="color: #FF4000">01</span> (create), text: <span style="color: #40BF00">&quot;name&quot;</span>
* Clan action type: <span style="color: #FF4000">02</span> (leave)
* Clan action type: <span style="color: #FF4000">03</span> (dissolve)
* Clan action type: <span style="color: #FF4000">04</span> (invite), text: <span style="color: #40BF00">&quot;pseudo&quot;</span>
* Clan action type: <span style="color: #FF4000">05</span> (eject), text: <span style="color: #40BF00">&quot;pseudo&quot;</span>
[[Base_protocol_messages#Reply_02000D|See reply to this query]]

== Client &rarr; Server without reply ==
=== 40 ===
Client -&gt; Server: previous moved unit: <span style="color: #0000FF">06</span>, direction: <span style="color: #FF4000">02</span>
 <span style="color: #0000FF">06</span><span style="color: #FF4000">02</span>
{{Direction definition}}

=== 43 ===
Client -&gt; Server: chat type: <span style="color: #FF4000">02</span>, text: <span style="color: #40BF00">&quot;hello&quot;</span> 8bits headers + utf8
 <span style="color: #FF4000">02</span><span style="color: #FFBF00">04</span><span style="color: #40BF00">68656c6c6f</span>
Client -&gt; Server: chat type: <span style="color: #FF4000">06</span> (private message), text: <span style="color: #40BF00">&quot;hello&quot;</span> 8bits headers + utf8, pseudo: <span style="color: #40BF00">&quot;toto&quot;</span> 8bits headers + utf8
 <span style="color: #FF4000">06</span><span style="color: #FFBF00">04</span><span style="color: #40BF00">68656c6c6f</span><span style="color: #FFBF00">04</span><span style="color: #40BF00">746f746f</span>
* {{Note}}The server will not return sended string to minimize the bandwidth.
* {{Note}}The system message type can be used, use the [[Command]] here, because to this, you need send the player type, adapt the client to the player type, ...

{{Chat_Type}}

== Server &rarr; Client with reply ==

=== 790001 ===
Server -&gt; Client, teleport the current player on the map:
* map id: <span style="color: #FFBF00">10</span> ({{Map_id}})
* local x: {{Player_x}}
* local y: {{Player_y}}
* direction: <span style="color: #FF4000">02</span> can be spawn walking, and do

 <span style="color: #FFBF00">10</span><span style="color: #40BFFF">02</span><span style="color: #FFBF00">02</span><span style="color: #FF4000">02</span>

{{Direction_definition}}

=== 790002 ===
Server -&gt; Client, event change ('''Take care: you have time limit to respond'''):
* event id: <span style="color: #FFBF00">01</span> (day cycle)
* value id: <span style="color: #FF4000">02</span> (night)

 <span style="color: #FFBF00">01</span><span style="color: #FF4000">02</span>

== Server &rarr; Client without reply ==

=== C0 ===
Server -&gt; Client, insert player on the map:
* type other player def: number of map: <span style="color: #FF4000">01</span>
** {{Map_id}}, number of player: {{Number_of_player}}:
*** player id: {{Player_id}}, information:
**** local x: {{Player_x}}
**** local y: {{Player_y}}
**** direction | player type: <span style="color: #FF4000">02</span> can be spawn walking, and do | with: <span style="color: #40BFFF">10</span> to the player type = <span style="color: #800080">12</span>
**** speed: <span style="color: #40BFFF">C8</span> (200, see [[Unit into the game]]) (If forcedSpeed==0)
**** pseudo: <span style="color: #40BF00">&quot;toto&quot;</span> (UTF8 + 8Bits of size header) (If dontSendPseudo==false)
**** skin: <span style="color: #FF4000">00</span>

 <span style="color: #FF4000">01</span> <span style="color: #FFBF00">10</span> <span style="color: #FF4000">0001</span>
 <span style="color: #BFBF40">2152</span><span style="color: #40BFFF">02</span><span style="color: #FFBF00">02</span><span style="color: #800080">12</span><span style="color: #40BFFF">04</span> <span style="color: #FF4000">01</span> <span style="color: #FFBF00">08</span><span style="color: #40BF00">746f746f</span> <span style="color: #FF4000">00</span>
 <span style="color: #FFBF00">10</span><span style="color: #40BFFF">02</span><span style="color: #FFBF00">02</span><span style="color: #FF4000">02</span>

Not use max visibility because it's just 4% of bandwidth less, but very more server slow and complexity. And only if max player is >255 and min player <255.

{{Direction_definition}}
{{Player_type}}
{{Skin}}

=== C20003 ===
Server -&gt; Client: file liste size: <span style="color: #FF4000">01</span><span style="color: #40BF00">&quot;file name&quot;</span> (UTF8 + 8Bits of header size), size <span style="color: #FF4000">00000001</span>, data: <span style="color: #40BFFF">XXXXXXXXXXXXXXXX[...]XXXXXXXXXX</span>
 <span style="color: #FF4000">01</span><span style="color: #FFBF00">12</span><span style="color: #40BF00">626164206c6f67696e</span><span style="color: #FF4000">00000001</span><span style="color: #40BFFF">XXXXXXXXXXXXXXXX[...]XXXXXXXXXX</span>

=== C20004 ===
'''This is compressed'''

Server -&gt; Client: file liste size: <span style="color: #FF4000">01</span><span style="color: #40BF00">&quot;file name&quot;</span> (UTF8 + 8Bits of header size), size <span style="color: #FF4000">00000001</span>, data: <span style="color: #40BFFF">XXXXXXXXXXXXXXXX[...]XXXXXXXXXX</span>
 <span style="color: #FF4000">01</span><span style="color: #FFBF00">12</span><span style="color: #40BF00">626164206c6f67696e</span><span style="color: #FF4000">00000001</span><span style="color: #40BFFF">XXXXXXXXXXXXXXXX[...]XXXXXXXXXX</span>

=== CA ===
Server -&gt; Client
*  for player: chat type: <span style="color: #FF4000">02</span>, text: <span style="color: #40BF00">&quot;hello&quot;</span> 8bits headers + utf8, player pseudo: <span style="color: #40BF00">&quot;toto&quot;</span> (UTF8 + 8Bits header), status: <span style="color: #40BFFF">10</span>
 <span style="color: #FF4000">02</span><span style="color: #FFBF00">04</span><span style="color: #40BF00">68656c6c6f</span><span style="color: #FFBF00">08</span><span style="color: #40BF00">746f746f</span><span style="color: #40BFFF">10</span>
*  for system: chat type: <span style="color: #FF4000">07</span>, text: <span style="color: #40BF00">&quot;The server will be rebooted&quot;</span> 8bits headers + utf8
 <span style="color: #FF4000">07</span><span style="color: #FFBF00">1A</span><span style="color: #40BF00">5468652736572766572277696c...</span>

{{Chat_Type}}
{{Player_type}}

=== C20008 ===
Server -&gt; Client: type: <span style="color: #FF4000">02</span>, <span style="color: #40BF00">&quot;toto&quot;</span>
 <span style="color: #FF4000">02</span><span style="color: #FFBF00">00000010</span><span style="color: #40BF00">006d006100700020006e0061006d0065</span>

orientation def:
* <span style="color: #FF4000">01</span> = kicked
* <span style="color: #FF4000">02</span> = ban
* <span style="color: #FF4000">03</span> = disconnected

=== C2000C ===
Server -&gt; Client: datapck file number: <span style="color: #FF4000">00000000</span>,  datapck file size: <span style="color: #40BF00">00000000</span>

=== C2000D ===
Server -&gt; Client: <span style="color: #40BF00">http://server/datapack/</span> (UTF8 + 8Bits of header size), file liste size: <span style="color: #FF4000">00000001</span><span style="color: #40BF00">&quot;file name&quot;</span> (UTF8 + 8Bits of header size)

=== C3 ===
Server -&gt; Client: number of player connected: {{Number_of_player}}
 <span style="color: #FF4000">0002</span>
'''''If this number is 0''''', then the player number is never send to client client (updating disabled).

=== C4 ===
Remove all other player on the map: (Better than remove each id)


=== C5 ===
Server -&gt; Client, mainly user to drop the over move:
* number of player: {{Number_of_player}}:
** player id: {{Player_id}}, information:
*** local x: {{Player_x}}
*** local y: {{Player_y}}
*** direction: <span style="color: #FF4000">02</span> can be spawn walking

 <span style="color: #FF4000">0001</span>
 <span style="color: #BFBF40">2152</span><span style="color: #40BFFF">02</span><span style="color: #FFBF00">02</span><span style="color: #FF4000">02</span>
{{Direction_definition}}

=== C6 ===
Server -&gt; Client, mainly used of the teleportation:
* type other player def: number of map: <span style="color: #FF4000">01</span>
** {{Map_id}}, number of player: {{Number_of_player}}:
*** player id: {{Player_id}}, information:
**** local x: {{Player_x}}
**** local y: {{Player_y}}
**** direction: <span style="color: #FF4000">02</span> can be spawn walking

 <span style="color: #FF4000">01</span> <span style="color: #FFBF00">10</span> <span style="color: #FF4000">0001</span>
 <span style="color: #BFBF40">2152</span><span style="color: #40BFFF">02</span><span style="color: #FFBF00">02</span><span style="color: #FF4000">02</span>
{{Direction_definition}}

=== C7 ===
Server -&gt; Client, move the player:
* type other player def: number of player: {{Number_of_player}}
** player id: {{Player_id}}, move with list size (<span style="color: #FFBF00">02</span>):
*** previous moved unit: <span style="color: #0000FF">06</span>, direction: <span style="color: #FF4000">02</span>
*** previous moved unit: <span style="color: #0000FF">08</span>, direction: <span style="color: #FF4000">01</span>

 <span style="color: #FF4000">0001</span>
 <span style="color: #BFBF40">2153</span><span style="color: #FFBF00">02</span><span style="color: #0000FF">06</span><span style="color: #FF4000">02</span><span style="color: #0000FF">08</span><span style="color: #FF4000">01</span>
{{Direction_definition}}

=== C8 ===
Server -&gt; Client, remove player from map:
* type other player def: number of player: {{Number_of_player}}:
** player id: {{Player_id}}

 <span style="color: #FF4000">0001</span> <span style="color: #BFBF40">2154</span>

=== C9 ===
Remove all other player on the border map: (Better than remove each id)

= Reply =
== Server &rarr; Client reply ==
=== Reply 03 ===
<span style="color: #40BFFF">02</span> (protocol not supported)

<span style="color: #40BFFF">03</span> (Server full)

<span style="color: #40BFFF">04</span> (is supported, compression: None), <span style="color: #40BFFF">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</span> token of 16bytes for auth

<span style="color: #40BFFF">05</span> (is supported, compression: Zlib), <span style="color: #40BFFF">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</span> token of 16bytes for auth

<span style="color: #40BFFF">06</span> (is supported, compression: Xz), <span style="color: #40BFFF">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</span> token of 16bytes for auth

{{Note}}After this, all communication is into the packet size mode send by the protocol.

=== Reply 04 ===
'''Note for dev: Is not way (or I have not found) to have max visibility player and simplified id with it without increasing the bandwidth due to id change (current player id pass into visibility zone need id change).'''


If all is good:
* <span style="color: #FF4000">01</span> (all is good)
* max player: <span style="color: #40BF00">0064</span> (then 100 in decimal) -> this define if the players id is defined on 16Bits ('''unknown max player at this point''', for the client at the startup)
* Next city capture in second: <span style="color: #FFBF00">00000012</span>
* City capture frequency: <span style="color: #7B00FF">01</span> (week, <span style="color: #7B00FF">02</span> for month)
* waitBeforeConnectAfterKick: <span style="color: #FF4000">00000014</span> (20s)
* forceClientToSendAtBorder: <span style="color: #FFBF00">00</span> (0 == not forced)
* forcedSpeed: <span style="color: #40BF00">C2</span> (0 == not forced)
* Bandwitdh vs latency: <span style="color: #40BF00">01</span> (00 == prefer low letency, 01 prefer low bandwith -> under linux match with TCP CORK)
* use SP: <span style="color: #40BF00">01</span> (01 == use sp, 00 == sp disabled)
* dontSendPseudo: <span style="color: #FFBF00">00</span>
* Character max: <span style="color: #40BFFF">01</span>
* Character min: <span style="color: #40BFFF">01</span>
* Pseudo size max: <span style="color: #40BFFF">10</span>
* Character delete time: <span style="color: #9F5F20">01</span>
* Rate xp: <span style="color: #FFBF00">3f800000</span> (1.0)
* Rate gold: <span style="color: #FFBF00">3f800000</span> (1.0)
* Rate xp_pow: <span style="color: #FFBF00">3f800000</span> (1.0)
* Rate drop: <span style="color: #FFBF00">3f800000</span> (1.0)
* Max player monsters: <span style="color: #40BFFF">01</span>
* Max warehouse player monsters: <span style="color: #40BFFF">01</span>
* Max player items: <span style="color: #40BFFF">01</span>
* Max warehouse player monsters: <span style="color: #40BFFF">01</span>
* Char allow all: <span style="color: #40BFFF">01</span> (0x00 = false, 0x01 = true)
* Char allow local: <span style="color: #40BFFF">01</span> (0x00 = false, 0x01 = true)
* Char allow private: <span style="color: #40BFFF">01</span> (0x00 = false, 0x01 = true)
* Char allow clan: <span style="color: #40BFFF">01</span> (0x00 = false, 0x01 = true)
* Industry price change: <span style="color: #FF4000">14</span> (+/- 20%)
* Mirror to use: &quot;<span style="color: #40BF00">http://serverprimary/datapack/;http://serversecondary/datapack/</span>&quot;, if don't empty, don't send datapack query, you have the datpack list at http://serverprimary/datapack/datapack-list.txt test without proxy and with proxy is set. Test the next server, ...
* sha224 of datapack file list content (prevent hack of external mirror), sha224 is checksum of client datapack file content ordened by relative to datapack base file name, used to don't send datapack list without mirror too
* number of map: <span style="color: #FF4000">00000002</span>
* Character list size <span style="color: #7B00FF">01</span>
** Character id: <span style="color: #BFBF40">00000001</span>
** Pseudo: <span style="color: #40BF00">&quot;Character 1&quot;</span>
** SkinId: <span style="color: #40BF00">01</span>
** Time left before delete: <span style="color: #40BFFF">00000000</span> (0s = no delete planned)
** Played time: <span style="color: #40BFFF">00000000</span>
** Last connect: <span style="color: #40BFFF">00000000</span>
** MapId: <span style="color: #40BF00">00000001</span> (32Bits, -1 if not found or buggy)

If something is wrong, the possible return code are:
* <span style="color: #FF4000">02</span> (Bad login)
* <span style="color: #FF4000">03</span> (Wrong login/pass)
* <span style="color: #FF4000">04</span> (Server internal error)
* <span style="color: #FF4000">05</span> (Can't create character and don't have character)
* <span style="color: #FF4000">06</span> (Login already in progress)
* <span style="color: #FF4000">07</span> (Emit in clear the secret token, see the account creation query)

After the server will send tp command to set the first position.

This reply is compressed.

=== Reply 05 ===
* <span style="color: #FF4000">01</span> (Created)
* <span style="color: #FF4000">02</span> (Login already used)
* <span style="color: #FF4000">03</span> (Not created)

=== Reply 020003 ===
Return code: <span style="color: #40BFBF">00</span> (00 = success, 01 = pseudo already taken, 02 = have already maximum of charaters, 03 = other)

The reply is the character id: <span style="color: #BFBF40">00000001</span>

=== Reply 020004 ===
If all is good:
<span style="color: #FF4000">01</span>

If something is wrong:
<span style="color: #FF4000">02</span>

=== Reply 020005 ===
If all is good:
* <span style="color: #FF4000">01</span> (all is good)
* Character id: {{Player_id}} (unique generated id on the map)
* pseudo: <span style="color: #40BF00">"toto"</span> (allow is string separated by ";")
* allow list size: <span style="color: #40BF00">01</span>
** allow clan: <span style="color: #40BF00">01</span>
* clan id: <span style="color: #40BFFF">00000064</span>
* clan_leader: <span style="color: #40BFFF">01</span>
* Events not with default value list size <span style="color: #7B00FF">01</span>
** Event id: <span style="color: #BFBF40">01</span>
** Value id: <span style="color: #40BF00">02</span>
* cash: <span style="color: #40BFFF">0000000000000064</span> (100$, set on 64Bits)
* warehouse cash: <span style="color: #40BFFF">0000000000000064</span> (100$, set on 64Bits)
* size of item on map: <span style="color: #7B00FF">01</span>
** item on map getted: <span style="color: #FF4000">01</span>
* size of list of the recipes: <span style="color: #7B00FF">0001</span>
** recipe id: <span style="color: #FF4000">0001</span>
* size of list of the monsters: <span style="color: #7B00FF">01</span>
** monsters id in db: <span style="color: #FF4000">00000001</span>
** monsters: <span style="color: #FF4000">0001</span>
** level: <span style="color: #40BF00">01</span>
** remaining_xp: <span style="color: #008080">00000001</span>
** hp: <span style="color: #FFBF00">00000001</span>
** sp: <span style="color: #FF00FF">00000001</span>
** captured_with: <span style="color: #40BF00">0001</span>
** gender: <span style="color: #FF4000">01</span>
** egg_step: <span style="color: #FFBF00">00000000</span> (is mature if = 0)
** character_origin: <span style="color: #FFBF00">00000001</span>
** size of list of the buff monsters: <span style="color: #7B00FF">01</span>
*** buff: <span style="color: #40BF00">01</span>
*** buff level: <span style="color: #FF4000">01</span>
** size of list of the skills monsters: <span style="color: #7B00FF">0001</span>
*** skill: <span style="color: #40BF00">0001</span>
*** skill level: <span style="color: #FF4000">01</span>
*** skill remaining usage: <span style="color: #FFBF00">01</span>
* size of list of the warehouse monsters: <span style="color: #7B00FF">01</span>
** monsters id in db: <span style="color: #FF4000">00000001</span>
** monsters: <span style="color: #FF4000">0001</span>
** level: <span style="color: #40BF00">01</span>
** remaining_xp: <span style="color: #008080">00000001</span>
** hp: <span style="color: #FFBF00">00000001</span>
** sp: <span style="color: #FF00FF">00000001</span>
** captured_with: <span style="color: #40BF00">0001</span>
** gender: <span style="color: #FF4000">01</span>
** egg_step: <span style="color: #FFBF00">00000000</span> (is mature if = 0)
** character_origin: <span style="color: #FFBF00">00000001</span>
** size of list of the buff monsters: <span style="color: #7B00FF">01</span>
*** buff: <span style="color: #40BF00">01</span>
*** buff level: <span style="color: #FF4000">01</span>
** size of list of the skills monsters: <span style="color: #7B00FF">0001</span>
*** skill: <span style="color: #40BF00">0001</span>
*** skill level: <span style="color: #FF4000">01</span>
*** skill remaining usage: <span style="color: #FFBF00">01</span>
* size of reputation list: <span style="color: #7B00FF">01</span>
** reputation type: <span style="font-style: italic"><span style="color: #40BF00">01</span></span>
** reputation level: <span style="color: #FF4000">01</span>
** reputation point: <span style="color: #008080">00000001</span>
* size of quest list: <span style="color: #7B00FF">0001</span>
** quest id: <span style="color: #40BF00">0001</span>
** quest step: <span style="color: #FF4000">01</span>
** quest finish one time: <span style="color: #008080">00</span> (false)
* size of list of the bot win (already betten): <span style="color: #7B00FF">0001</span>
** bot id win (already betten): <span style="color: #40BF00">0001</span>

After the server will send tp command to set the first position.

This reply is compressed.

Wrong, case possible:
* <span style="color: #FF4000">02</span> (Character not found)
* <span style="color: #FF4000">03</span> (Already logged)
* <span style="color: #FF4000">04</span> (Server internal problem)

=== Reply 02000C ===
The reply is '''BITS''', put 0 bits if needed to do a byte.
Reply a list, with same number of item of the source query (<span style="color: #FF4000">1</span> to keep, <span style="color: #FF4000">0</span> to delete):
* <span style="color: #FF4000">1</span>
* <span style="color: #FF4000">0</span>
* <span style="color: #FF4000">1</span>
This reply is compressed.

Return 0x00 if empty;

=== Reply 02000D ===
* Clan reply type: <span style="color: #FF4000">01</span> success (some time send the 32Bits id)
* Clan reply type: <span style="color: #FF4000">02</span> failed

= Other =
== Map id ==
You need load the map list, sort() it, check if match with datapack file list, and the id is the position.

If the map list size is <= 255, then send on 8Bits, if <=65535 then on 16Bits, else on 32Bits.
