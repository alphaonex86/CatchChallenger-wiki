= General =
== Client &rarr; Server with reply ==
{| class="wikitable" style="text-align: center; font-size: 85%; width: auto; table-layout: fixed;"
|-
! Main code type
! Sub code type
! Query number
! Packet size
! Data
|-
| style="background: #90ff90; color: black;" | 02
| style="background: #ffcc00; color: black;" | 0001
| XX
| {{Yes}}
| [[Base_protocol_messages#020001|Protocol initialization]]
|-
| style="background: #90ff90; color: black;" | 02
| style="background: #ffcc00; color: black;" | 0002
| XX
| {{Yes}}
| [[Base_protocol_messages#020002|Get first data and send the login]]
|-
| style="background: #90ff90; color: black;" | 02
| style="background: #ffcc00; color: black;" | 000C
| XX
| {{Yes}}
| [[Base_protocol_messages#02000C|Send datapack file list]]
|}
{{Note}}All the main code in this column is considered query with needed reply.

== Client &rarr; Server without reply ==
{| class="wikitable" style="text-align: center; font-size: 85%; width: auto; table-layout: fixed;"
|-
! Main code type
! Sub code type
! Query number
! Packet size
! Data
|-
| style="background: #90ff90; color: black;" | 40
| 
| 
| {{No}}
| [[Base_protocol_messages#40|Send position + direction]] '''''(Fast)'''''
|-
| style="background: #90ff90; color: black;" | 41
| 
| XX
| style="background: #9CF6FF; color: black;" | Depands
| [[Base_protocol_messages#41|Reply to server query]] ([[Base_protocol_messages#Reply|See reply]])
|-
| style="background: #90ff90; color: black;" | 42
| style="background: #ffcc00; color: black;" | 0003
| 
| {{Yes}}
| [[Base_protocol_messages#420003|Chat]]
|}

== Server &rarr; Client with reply ==
{| class="wikitable" style="text-align: center; font-size: 85%; width: auto; table-layout: fixed;"
|-
! Main code type
! Sub code type
! Query number
! Packet size
! Data
|-
| style="background: #90ff90; color: black;" | 79
| style="background: #ffcc00; color: black;" | 0001
| XX
| {{Yes}}
| [[Base_protocol_messages#790001|Teleport the player]]
|}

== Server &rarr; Client without reply ==
{| class="wikitable" style="text-align: center; font-size: 85%; width: auto; table-layout: fixed;"
|-
! Main code type
! Sub code type
! Query number
! Packet size
! Data
|-
| style="background: #90ff90; color: black;" | C0
| 
| 
| {{Yes}}
| [[Base_protocol_messages#C0|Position + direction of other player]] '''''(Fast)'''''
|-
| style="background: #90ff90; color: black;" | C1
| 
| XX
| style="background: #9CF6FF; color: black;" | Depands
| [[Base_protocol_messages#C1|Reply to client query]] ([[Base_protocol_messages#Reply|See reply]])
|-
| style="background: #90ff90; color: black;" | C2
| style="background: #ffcc00; color: black;" | 0001
| 
| {{Yes}}
| [[Base_protocol_messages#C20001|Random seed list]]
|-
| style="background: #90ff90; color: black;" | C2
| style="background: #ffcc00; color: black;" | 0003
| 
| {{Yes}}
| [[Base_protocol_messages#C2003|update file]]
|-
| style="background: #90ff90; color: black;" | C2
| style="background: #ffcc00; color: black;" | 0005
| 
| {{Yes}}
| [[Base_protocol_messages#C20005|chat]]
|-
| style="background: #90ff90; color: black;" | C2
| style="background: #ffcc00; color: black;" | 0008
| 
| {{Yes}}
| [[Base_protocol_messages#C20008|kicked/ban and reason]]
|-
| style="background: #90ff90; color: black;" | C3
| 
| 
| {{No}}
| [[Base_protocol_messages#C3|Player number]]
|-
| style="background: #90ff90; color: black;" | C4
| 
| 
| {{No}}
| [[Base_protocol_messages#C4|Remove all other player on the map]]
|}

= Reply =
== Client &rarr; Server ==
{| class="wikitable" style="text-align: center; font-size: 85%; width: auto; table-layout: fixed;"
|-
! Main code type of the query
! Sub code type of the query
! Packet size for the reply
! Query
|-
| style="background: #90ff90; color: black;" | 79
| style="background: #ffcc00; color: black;" | 0001
| {{No}}
| [[Base_protocol_messages#Reply_790001|Teleport the player]]
|}
== Server &rarr; Client ==
{| class="wikitable" style="text-align: center; font-size: 85%; width: auto; table-layout: fixed;"
|-
! Main code type of the query
! Sub code type of the query
! Packet size for the reply
! Query
|-
| style="background: #90ff90; color: black;" | 02
| style="background: #ffcc00; color: black;" | 0001
| {{Yes}}
| [[Base_protocol_messages#Reply_020001|Protocol initialization]]
|-
| style="background: #90ff90; color: black;" | 02
| style="background: #ffcc00; color: black;" | 0002
| {{Yes}}
| [[Base_protocol_messages#Reply_020002|Get first data and send the login]]
|-
| style="background: #90ff90; color: black;" | 02
| style="background: #ffcc00; color: black;" | 000C
| {{Yes}}
| [[Base_protocol_messages#Reply_02000C|Send datapack file list]]
|}

= Details =
== Client &rarr; Server with reply ==
=== 020001 ===
{{Note}}This first packet is send as raw + big (see [[General_protocol#Messages_composition|Messages composition]])

At the connection, send the protocol supported, <span style="font-weight: bold">before all!</span><br />query type: query number: <span style="font-style: italic"><span style="color: #40BF00">&quot;catchchallenger-0.0.0.1&quot;</span></span>
 <span style="color: #FFBF00">00000022</span><span style="color: #40BF00">0070006f006b006500630072006100660074002d0030002e0030002e0030002e0031</span>

{{Note}}After this, all communication is into the packet size + compression mode send by the protocol.

[[Base_protocol_messages#Reply_020001|See reply to this query]]

=== 020002 ===
Get the first position and direction, and send login clear and pass sha1:<br /><span style="color: #40BF00">&quot;toto&quot;</span>, <span style="color: #FF0040">da39a3ee5e6b4b0d3255bfef95601890afd80709</span><br />
 <span style="color: #FFBF00">00000008</span><span style="color: #40BF00">0074006f0074006f</span><span style="color: #FF0040">da39a3ee5e6b4b0d3255bfef95601890afd80709</span>

[[Base_protocol_messages#Reply_020002|See reply to this query]]

=== 02000C ===
Send file name and timestamps (second since 1/1/1970 in 32Bits) of the file requested:<br />number to file: <span style="color: #FF4000">00000003</span>:
* <span style="color: #40BF00">&quot;img/player/skin-01.png&quot;</span> <span style="color: #FF4000">Mon, 28 Nov 2011 17:16:03</span>
* <span style="color: #40BF00">&quot;img/player/skin-01.png&quot;</span> <span style="color: #FF4000">Mon, 28 Nov 2011 17:16:03</span>
* <span style="color: #40BF00">&quot;img/player/skin-01.png&quot;</span> <span style="color: #FF4000">Mon, 28 Nov 2011 17:16:03</span>
 <span style="color: #FF4000">00000003</span>
 <span style="color: #FFBF00">0000002c</span><span style="color: #40BF00">0069006d0067002f0070006c0061007900650072002f0073006b0069006e002d00300031002e0070006e0067</span><span style="color: #FF4000">4ED3C1D3</span>
 <span style="color: #FFBF00">0000002c</span><span style="color: #40BF00">0069006d0067002f0070006c0061007900650072002f0073006b0069006e002d00300031002e0070006e0067</span><span style="color: #FF4000">4ED3C1D3</span>
 <span style="color: #FFBF00">0000002c</span><span style="color: #40BF00">0069006d0067002f0070006c0061007900650072002f0073006b0069006e002d00300031002e0070006e0067</span><span style="color: #FF4000">4ED3C1D3</span>
This packet is compressed.

[[Base_protocol_messages#Reply_02000C|See reply to this query]]

== Client &rarr; Server without reply ==
=== 40 ===
Client -&gt; Server: previous moved unit: <span style="color: #0000FF">06</span>, direction: <span style="color: #FF4000">02</span>
 <span style="color: #0000FF">06</span><span style="color: #FF4000">02</span>
{{Direction definition}}

=== 420003 ===
Client -&gt; Server: chat type: <span style="color: #FF4000">02</span>, text: <span style="color: #40BF00">&quot;hello&quot;</span>
 <span style="color: #FF4000">02</span><span style="color: #FFBF00">0000000a</span><span style="color: #40BF00">00680065006c006c006f</span>
{{Note}}The server will not return sended string to minimize the bandwidth.

{{Chat_Type}}

== Server &rarr; Client without reply ==

=== C0 ===
Server -&gt; Client:
* type other player def: <span style="color: #40BFFF">01</span> (insert), number of map: <span style="color: #FF4000">01</span>
** <span style="color: #40BF00">&quot;map name&quot;</span> (UTF8 + 8Bits of size header), number of player: {{Number_of_player}}:
*** player id: {{Player_id}}, information:
**** local x: {{Player_x}}
**** local y: {{Player_y}}
**** direction | status: <span style="color: #FF4000">02</span> can be spawn walking, and do | with: <span style="color: #40BFFF">10</span> to the player status = <span style="color: #800080">12</span>
**** speed: <span style="color: #40BFFF">04</span> (50ms*4, see [[Unit into the game]])
**** pseudo: <span style="color: #40BF00">&quot;toto&quot;</span>
**** clan: <span style="color: #FF4000">01</span>
**** skin: <span style="color: #40BF00">&quot;skin name&quot;</span>

* type other player def: <span style="color: #40BFFF">02</span> (move), number of player: {{Number_of_player}}
** player id: {{Player_id}}, move with list size (<span style="color: #FFBF00">02</span>):
*** previous moved unit: <span style="color: #0000FF">06</span>, direction: <span style="color: #FF4000">02</span>
*** previous moved unit: <span style="color: #0000FF">08</span>, direction: <span style="color: #FF4000">01</span>
* type other player def: <span style="color: #40BFFF">03</span> (delete), number of player: {{Number_of_player}}:
** player id: {{Player_id}}

 <span style="color: #40BFFF">01</span> <span style="color: #FF4000">01</span> <span style="color: #FFBF00">10</span><span style="color: #40BF00">6d6170206e616d65</span> <span style="color: #FF4000">0001</span>
 <span style="color: #BFBF40">2152</span><span style="color: #40BFFF">02</span><span style="color: #FFBF00">02</span><span style="color: #800080">12</span><span style="color: #40BFFF">04</span> <span style="color: #FFBF00">08</span><span style="color: #40BF00">746f746f</span> <span style="color: #FF4000">01</span> <span style="color: #FFBF00">12</span><span style="color: #40BF00">736b696e206e616d65</span>
 <span style="color: #40BFFF">02</span> <span style="color: #FF4000">0001</span>
 <span style="color: #BFBF40">2153</span><span style="color: #FFBF00">02</span><span style="color: #0000FF">06</span><span style="color: #FF4000">02</span><span style="color: #0000FF">08</span><span style="color: #FF4000">01</span>
 <span style="color: #40BFFF">03</span> <span style="color: #FF4000">0001</span> <span style="color: #BFBF40">2154</span>
{{Direction_definition}}
type other player def:
* <span style="color: #40BFFF">01</span> = first position definition
* <span style="color: #40BFFF">02</span> = movement definition
* <span style="color: #40BFFF">03</span> = player is dropped

{{Player_type}}

=== C20001 ===
Server -&gt; Client: random bytes: <span style="color: #40BFFF">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX[...]XXXXXXXXXXX</span>

 <span style="color: #40BFFF">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX[...]XXXXXXXXXXX</span>

=== C20003 ===
Server -&gt; Client: <span style="color: #40BF00">&quot;file name&quot;</span>, file size: <span style="color: #FF4000">00000050</span>, last modification time stamps: <span style="color: #FF4000">4ED3C1D3</span>, data: <span style="color: #40BFFF">XXXXXXXXXXXXXXXX[...]XXXXXXXXXX</span>
 <span style="color: #FFBF00">00000012</span><span style="color: #40BF00">0062006100640020006c006f00670069006e</span><span style="color: #FF4000">00000050</span><span style="color: #FF4000">4ED3C1D3</span><span style="color: #40BFFF">XXXXXXXXXXXXXXXX[...]XXXXXXXXXX</span>

=== C20005 ===
Server -&gt; Client
*  for player: chat type: <span style="color: #FF4000">02</span>, text: <span style="color: #40BF00">&quot;hello&quot;</span>, player pseudo: <span style="color: #40BF00">&quot;toto&quot;</span>, status: <span style="color: #40BFFF">01</span>
 <span style="color: #FF4000">02</span><span style="color: #FFBF00">0000000a</span><span style="color: #40BF00">00680065006c006c006f</span><span style="color: #FFBF00">00000008</span><span style="color: #40BF00">0074006f0074006f</span><span style="color: #40BFFF">01</span>
*  for system: chat type: <span style="color: #FF4000">07</span>, text: <span style="color: #40BF00">&quot;The server will be rebooted&quot;</span>
 <span style="color: #FF4000">07</span><span style="color: #FFBF00">00000036</span><span style="color: #40BF00">0054006800650020007300650072007600650072002000770069006c006c0020006200650020007200650062006f006f007400650064</span>

{{Chat_Type}}
{{Player_type}}

=== C20008 ===
Server -&gt; Client: type: <span style="color: #FF4000">02</span>, <span style="color: #40BF00">&quot;toto&quot;</span>
 <span style="color: #FF4000">02</span><span style="color: #FFBF00">00000010</span><span style="color: #40BF00">006d006100700020006e0061006d0065</span>

orientation def:
* <span style="color: #FF4000">01</span> = kicked
* <span style="color: #FF4000">02</span> = ban
* <span style="color: #FF4000">03</span> = disconnected

=== C3 ===
Server -&gt; Client: current: <span style="color: #FF4000">0002</span>
 <span style="color: #FF4000">0002</span>

=== C4 ===
Remove all other player on the map: (Better than remove each id)

= Reply =
== Server &rarr; Client reply ==
=== Reply 020001 ===
<span style="color: #40BFFF">01</span> (is supported), size format for upload <span style="color: #FF0000">01</span> (client -> server, small: see [[General_protocol#Messages_composition|Messages composition]]), size format for download <span style="color: #FF0000">02</span> (server -> client, big: see [[General_protocol#Messages_composition|Messages composition]])
 <span style="color: #40BFFF">01</span><span style="color: #FF0000">01</span><span style="color: #FF0000">02</span>

<span style="color: #40BFFF">02</span> (protocol not supported)
 <span style="color: #40BFFF">02</span>

<span style="color: #40BFFF">03</span>, <span style="font-style: italic"><span style="color: #40BF00">&quot;Server full&quot;</span></span>
 <span style="color: #40BFFF">03</span><span style="color: #FFBF00">0000002c</span><span style="color: #40BF00">00700072006f0074006f0063006f006c0020006e006f007400200073007500700070006f0072007400650064</span>

{{Note}}After this, all communication is into the packet size + compression mode send by the protocol.

=== Reply 020002 ===
<span style="color: #FF4000">01</span> (something is wrong), <span style="color: #40BF00">&quot;bad login&quot;</span> (or other server error)
 <span style="color: #FF4000">01</span><span style="color: #FFBF00">00000012</span><span style="color: #40BF00">0062006100640020006c006f00670069006e</span>

<span style="color: #FF4000">02</span> (all is good), player id: {{Player_id}} (see [[Base_protocol_messages#C20002|update of the player info]] to have the full info), max player: <span style="color: #40BF00">0064</span> (then 100 in decimal), and put the current player private information:
* cash: <span style="color: #40BFFF">00000000</span> (0$)
 <span style="color: #FF4000">02</span><span style="color: #BFBF40">2152</span><span style="color: #40BF00">0064</span><span style="color: #40BFFF">00000000</span>
After the server will send tp command to set the first position.

=== Reply 02000C ===
Reply a list, with same number of item of the source query (<span style="color: #FF4000">01</span> to found, <span style="color: #FF4000">02</span> to delete):
* <span style="color: #FF4000">01</span>
* <span style="color: #FF4000">02</span>
* <span style="color: #FF4000">01</span>
This reply is compressed.
