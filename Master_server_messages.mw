{{note}}: The first byte send by server is 0x00 to say no encrypted or 0x01 to say encrypted by Ssl.

= General =
== Client &rarr; Server with reply ==
{| class="wikitable" style="text-align: center; font-size: 85%; width: auto; table-layout: fixed;"
|-
! Main code type
! Sub code type
! Query number
! Packet size
! Data
{{Template:Master_server_messages_Client_Server_Reply}}
|-
| Login specific
{{Template:Login_protocol_messages_Client_Server_Reply}}
|}
{{Note}}All the main code in this column is considered query with needed reply

== Client &rarr; Server without reply ==
{| class="wikitable" style="text-align: center; font-size: 85%; width: auto; table-layout: fixed;"
|-
! Main code type
! Sub code type
! Query number
! Packet size
! Data
{{Template:Master_server_messages_Client_Server}}
|}

= Reply =
== Server &rarr; Client ==
{| class="wikitable" style="text-align: center; font-size: 85%; width: auto; table-layout: fixed;"
|-
! Main code type of the query
! Sub code type of the query
! Packet size for the reply
! Query
|-
| style="background: #90ff90; color: black;" | 01
|
| {{Yes}}
| [[Master server messages#Reply_01|Protocol initialization and login]]
|-
| style="background: #90ff90; color: black;" | 07
|
| {{Yes}}
| [[Master server messages#Reply_07|Register game server]]
|-
| style="background: #90ff90; color: black;" | 08
|
| {{Yes}}
| [[Master server messages#Reply_08|Register login server]]
|-
| style="background: #90ff90; color: black;" | 09
|
| {{No}}
| [[Master server messages#Reply_09|Game server ask if token is right]]
|}

= Details =
== Client &rarr; Server with reply ==
=== 01 ===
{{Note}}This first packet is send as raw + big (see [[General_protocol#Messages_composition|Messages composition]])

At the connection, send the protocol supported, <span style="font-weight: bold">before all!</span><br />
protocol magic number: <span style="font-style: italic"><span style="color: #40BF00">8862BCBB679E3DE7</span></span>, token for auth: <span style="font-style: italic"><span style="color: #FFBF00">XXX...XXX</span> (64 Bytes)</span>. The right token to send is stored in hexa into the config file on master server, generated after the first start.

Final result:
 <span style="color: #40BF00">8862BCBB679E3DE7</span><span style="color: #FFBF00">XXX...XXX</span>

[[Master server messages#Reply_01|See reply to this query]]

=== 07 ===
* charactersGroup: <span style="color: #40BF00">"HightRates"</span> (8Bits header + utf8, only [a-z0-9]+)
* Unique key: <span style="color: #FFBF00">00000000</span> (32bits, generate from random)
* <span style="color: #FFBF00">&quot;Host&quot;</span> 8bits headers + utf8
* <span style="color: #0000FF">9999</span> (port, 16Bits)
* <span style="color: #40BFFF"><name>Server test 4</name><name lang="fr">Serveur de teste 4</name><description>Description in english</description><description lang="fr">Description en fran√ßais</description></span> (xml attached) 16bits headers + utf8
* <span style="color: #7B00FF">folder/path</span> (group) 8bits headers + utf8
* max player: <span style="color: #40BF00">0064</span> (then 100 in decimal)

[[Master server messages#Reply_07|See reply to this query]]

= Reply =
== Server &rarr; Client reply ==
=== Reply 01 ===
* <span style="color: #40BFFF">02</span> (protocol not supported)
* <span style="color: #40BFFF">07</span> (Token auth wrong)
* <span style="color: #40BFFF">04</span> (is supported, compression: None)
* <span style="color: #40BFFF">05</span> (is supported, compression: Zlib)
* <span style="color: #40BFFF">06</span> (is supported, compression: Xz)
=== Reply 08 ===
See '''C211''' to follow Characters group alphabetical order

* 50 maxAccountIdList: <span style="color: #40BF00">00000001</span>

* By Characters group
** 50 maxCharacterIdList: <span style="color: #40BF00">00000001</span>
** 50 maxMonsterIdList: <span style="color: #40BF00">00000001</span>
